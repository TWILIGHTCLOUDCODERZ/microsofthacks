{
 "name": "Appointment scheduling",
 "id": "141aab23-5194-44f1-a8dc-fe7160c35d6c",
 "scenario_trigger": "appointment_scheduling",
 "description": "Allow users to schedule an appointment with a healthcare provider using FHIR.",
 "active": true,
 "updated": "2022-12-06T10:47:27.731Z",
 "userDisplayName": "ODL_User 777981",
 "code": "{\"version\":3,\"steps\":[{\"id\":\"4676f5c0f77c-ec78307880be5a9a-d793\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":140,\"yLocation\":0,\"next\":\"a291d882f045-dc43d4d11d6f3ded-8d8d\"},\"text\":\"Hi,\\nTwilight Healthcare agent here to help you!\",\"variable\":\"Consent\",\"stringId\":\"PediatricAsthmaSymptomScale_7b99c0a0abc93517\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n    \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n    \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n    \\\"version\\\": \\\"1.0\\\",\\r\\n    \\\"body\\\": [\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"size\\\": \\\"Medium\\\",\\r\\n            \\\"weight\\\": \\\"Bolder\\\",\\r\\n            \\\"text\\\": \\\"Scheduling medical appointments \\\"\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"With Healthcare Bot appointment scheduling you can allow users to schedule an appointment with a healthcare provider without leaving the conversation. \\\\n\\\\n\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"This template contains the structure for creating an appointment scheduling bot using FHIR. Note that the business rules for displaying availability should be handled separately. \\\\n\\\\n\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        },\\r\\n        \\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"Important Note: \\\",\\r\\n            \\\"weight\\\": \\\"Bolder\\\"\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"This scenario utilizes an public FHIR server and should be used for testing purposes only.\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        }\\r\\n    ],\\r\\n    \\\"actions\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"Action.Submit\\\",\\r\\n      \\\"title\\\": \\\"Continue\\\"\\r\\n    }\\r\\n  ]\\r\\n    \\r\\n}\"}],\"label\":\"Notice\",\"markdown\":false},{\"id\":\"a291d882f045-dc43d4d11d6f3ded-8d8d\",\"type\":\"prompt\",\"dataType\":\"['Yes', 'No']\",\"designer\":{\"xLocation\":138,\"yLocation\":60,\"next\":\"9ec4f8beae25-c4b4a989620942c7-e56a\",\"listStyle\":3},\"text\":\"Welcome to the Imaging department at Twilight  Hospital & Medical Center!  \\n\\n\",\"variable\":\"userConsent\",\"choiceType\":\"choice\",\"stringId\":\"stringId_af3b27a22ea5c144\",\"label\":\"Welcome\",\"markdown\":false},{\"id\":\"20737162a687-2f88f90ae4ff837e-e760\",\"type\":\"action\",\"label\":\"serviceTypes\",\"designer\":{\"xLocation\":142,\"yLocation\":199,\"next\":\"029e12761327-6763f043cf49e6cf-8fba\"},\"onInit\":\"scenario.availableServiceTypes = {\\r\\n    \\\"Asthma checkup\\\": {\\r\\n        \\\"code\\\": \\\"272\\\"\\r\\n    },\\r\\n    \\\"Computed Tomography Scan (CT)\\\": {\\r\\n        \\\"code\\\": \\\"209\\\"\\r\\n    },\\r\\n    \\\"Fluoroscopy\\\": {\\r\\n        \\\"code\\\": \\\"209\\\"\\r\\n    },\\r\\n    \\\"Nuclear Medicine\\\": {\\r\\n        \\\"code\\\": \\\"212\\\"\\r\\n    },\\r\\n    \\\"Diagnostic Ultrasound\\\": {\\r\\n        \\\"code\\\": \\\"210\\\"\\r\\n    },\\r\\n    \\\"X-Ray\\\": {\\r\\n        \\\"code\\\": \\\"209\\\"\\r\\n    }\\r\\n};\",\"visible\":true,\"async\":false},{\"id\":\"029e12761327-6763f043cf49e6cf-8fba\",\"type\":\"prompt\",\"dataType\":\"scenario.availableServiceTypes\",\"designer\":{\"xLocation\":138,\"yLocation\":280,\"next\":\"a4cd62f4eb68-a23ce3da2e73a626-eb44\",\"listStyle\":3},\"text\":\"Please select a service from the below list:\",\"variable\":\"selectedServiceType\",\"stringId\":\"stringId_c1bc631fae12f7df\",\"choiceType\":\"choice\",\"label\":\"Select type\"},{\"id\":\"98f942e5014a-f5622096aa0f267b-d372\",\"type\":\"datasource\",\"designer\":{\"xLocation\":136,\"yLocation\":800,\"next\":\"dd09d52444f0-6127784ad52de326-2f2d\",\"errorStepId\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\"},\"dataConnection\":\"FHIR server for appointment scheduling\",\"urlPath\":\"/Slot\",\"urlParams\":\"`schedule=${scenario.selectedSchedule.id}`\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"availableSlotsReponse\",\"label\":\"Get slots\",\"fhirAction\":\"Read\",\"fhirResource\":\"Slot\",\"payload\":\"/* fill the missing fields */\\nFHIR({\\n  \\\"resourceType\\\": \\\"Slot\\\"\\n});\"},{\"id\":\"a4cd62f4eb68-a23ce3da2e73a626-eb44\",\"type\":\"action\",\"label\":\"Get code\",\"designer\":{\"xLocation\":142,\"yLocation\":349,\"next\":\"c74bda4834c5-f57e6d647ff3f52b-5138\"},\"onInit\":\"scenario.selectedServiceTypeCode = scenario.availableServiceTypes[scenario.selectedServiceType.entity].code;\",\"visible\":true,\"async\":false},{\"id\":\"7ac438cb489c-4e926184a815dc4c-bf64\",\"type\":\"statement\",\"designer\":{\"xLocation\":22,\"yLocation\":200},\"text\":\"If you have any further questions, please don’t hesitate to contact me.\",\"stringId\":\"stringId_7dd2bb2c580ab0dc\"},{\"id\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\",\"type\":\"statement\",\"designer\":{\"xLocation\":0,\"yLocation\":720},\"text\":\"I was not able to find open slots, please try again later.\",\"stringId\":\"stringId_761a6f4fd3c3d1f5\"},{\"id\":\"c74bda4834c5-f57e6d647ff3f52b-5138\",\"type\":\"statement\",\"designer\":{\"xLocation\":136,\"yLocation\":440,\"next\":\"6ac2ba046181-2526d0a87345aea7-13d5\"},\"text\":\"Got it! I will be happy to assist you in with setting it up.\",\"stringId\":\"stringId_4dd88f65fad5af0a\",\"label\":\"\"},{\"id\":\"a2da92d8f49f-1721deedc2a067c0-c43d\",\"type\":\"datasource\",\"designer\":{\"xLocation\":714,\"yLocation\":600,\"reverse\":true,\"next\":\"289a294095d2-aa6b404d235ae4fa-34df\",\"errorStepId\":\"f3f8ce7915df-b577dc5f64070dd6-b24c\"},\"dataConnection\":\"%Tenant's FHIR server data connection%\",\"urlPath\":\"/Patient\",\"urlParams\":\"`given=${scenario.searchPatientInfo.firstName}&family=${scenario.searchPatientInfo.lastName}&gender=${scenario.searchPatientInfo.gender}&birthdate=${scenario.searchPatientInfo.birthDate}`\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"searchPatientResponse\",\"label\":\"Search existing Patient\",\"authenticationProvider\":\"%Tenant's FHIR server auth-provider%\",\"fhirAction\":\"Read\",\"fhirResource\":\"Patient\",\"payload\":\"/* fill the missing fields */\\nFHIR({\\n  \\\"resourceType\\\": \\\"Patient\\\"\\n});\"},{\"id\":\"6ac2ba046181-2526d0a87345aea7-13d5\",\"type\":\"datasource\",\"designer\":{\"xLocation\":138,\"yLocation\":520,\"next\":\"2a1eadce992a-abaa0e7818423d4e-e03f\",\"errorStepId\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\"},\"dataConnection\":\"FHIR server for appointment scheduling\",\"urlPath\":\"/Schedule\",\"urlParams\":\"`service-type=${scenario.selectedServiceTypeCode}`\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"availableSchedulesResponse\",\"label\":\"Get schedules\",\"fhirAction\":\"Read\",\"fhirResource\":\"Schedule\",\"payload\":\"/* fill the missing fields */\\nFHIR({\\n  \\\"resourceType\\\": \\\"Schedule\\\"\\n});\"},{\"id\":\"ea07d46be4a3-795e5641bde518d2-2058\",\"type\":\"prompt\",\"dataType\":\"scenario.availableSlots\",\"designer\":{\"xLocation\":138,\"yLocation\":1069,\"next\":\"5dc09ed97398-ffed6e2f5572de0a-29bd\",\"listStyle\":3},\"text\":\"Please select a date and time for your appointment: \",\"variable\":\"selectedSlotStartText\",\"stringId\":\"stringId_ff87f72cb613eda7\",\"choiceType\":\"choice\",\"label\":\"Time\"},{\"id\":\"dd09d52444f0-6127784ad52de326-2f2d\",\"type\":\"action\",\"label\":\"Available slots\",\"designer\":{\"xLocation\":140,\"yLocation\":880,\"next\":\"ac43e93ecc06-027530b882db2982-c6be\"},\"onInit\":\"scenario.availableSlots = {};\\r\\nscenario.availableSlotsReponse.entry.map(entry => entry.resource).forEach(resource => {\\r\\n    const date = new Date(resource.start);\\r\\n    const dateText = moment(date).format(\\\"dddd, MMMM Do YYYY, h:mm A\\\");\\r\\n    scenario.availableSlots[dateText] = {\\r\\n        slot: resource\\r\\n    };\\r\\n});\"},{\"id\":\"2a1eadce992a-abaa0e7818423d4e-e03f\",\"type\":\"action\",\"label\":\"Selected schedule\",\"designer\":{\"xLocation\":142,\"yLocation\":608,\"next\":\"98bf84566402-e951c9d55729919f-fd24\"},\"onInit\":\"scenario.availableSchedules = [];\\r\\nif (scenario.availableSchedulesResponse && scenario.availableSchedulesResponse.entry) {\\r\\n    scenario.availableSchedules = scenario.availableSchedulesResponse.entry.map(entry => entry.resource);\\r\\n}\\r\\nif (scenario.availableSchedules.length > 0) {\\r\\n    // assuming there is one schedule for each service type we set the first one on selectedSchedule\\r\\n    scenario.selectedSchedule = scenario.availableSchedules[0];\\r\\n}\"},{\"id\":\"a33a29b90878-d2ba8903a3e41439-4a83\",\"type\":\"datasource\",\"designer\":{\"xLocation\":478,\"yLocation\":590,\"next\":\"f9c3527cfed7-e867c5ed69e87451-afa4\",\"errorStepId\":\"f3f8ce7915df-b577dc5f64070dd6-b24c\"},\"dataConnection\":\"%Tenant's FHIR server data connection%\",\"urlPath\":\"/Patient\",\"urlParams\":\"'_format=application/json'\",\"method\":\"post\",\"headers\":\"\",\"payload\":\"{\\n    \\\"resourceType\\\": \\\"Patient\\\",\\n    \\\"name\\\": {\\n        \\\"given\\\": scenario.createPatientInfo.firstName,\\n\\t\\t\\\"family\\\": scenario.createPatientInfo.lastName,\\n\\t\\t\\\"text\\\": scenario.createPatientInfo.firstName + \\\" \\\" + scenario.createPatientInfo.lastName\\n    },\\n    \\\"birthDate\\\": scenario.createPatientInfo.birthDate,\\n    \\\"gender\\\": scenario.createPatientInfo.gender,\\n    \\\"telecom\\\": [\\n    \\t{\\n    \\t\\t\\\"system\\\": \\\"email\\\",\\n    \\t\\t\\\"value\\\": scenario.createPatientInfo.email\\n    \\t},\\n    \\t{\\n    \\t\\t\\\"system\\\": \\\"phone\\\",\\n    \\t\\t\\\"value\\\": scenario.createPatientInfo.mobilePhone,\\n    \\t\\t\\\"use\\\": \\\"mobile\\\"\\n    \\t},\\n    \\t{\\n\\t\\t\\t\\\"system\\\": \\\"phone\\\",\\n    \\t\\t\\\"value\\\": scenario.createPatientInfo.homePhone,\\n    \\t\\t\\\"use\\\": \\\"home\\\"\\n    \\t}\\n    ]\\n}\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"createPatientResponse\",\"label\":\"Create Patient\",\"authenticationProvider\":\"%Tenant's FHIR server auth-provider%\",\"fhirAction\":\"Create\",\"fhirResource\":\"Patient\"},{\"id\":\"289a294095d2-aa6b404d235ae4fa-34df\",\"type\":\"action\",\"label\":\"Get selectedPatient from searchPatientResponse\",\"designer\":{\"xLocation\":714,\"yLocation\":660,\"next\":\"f76048d44afb-38f651e3ff0faf40-b436\"},\"onInit\":\"scenario.availablePatients = [];\\r\\nif(scenario.searchPatientResponse && scenario.searchPatientResponse.entry){\\r\\n    scenario.availablePatients = scenario.searchPatientResponse.entry.map(entry => entry.resource);\\r\\n}\\r\\nif(scenario.availablePatients.length > 0) {\\r\\n    // assuming there is one patient for given search criteria\\r\\n    scenario.selectedPatient = scenario.availablePatients[0];\\r\\n}\"},{\"id\":\"f9c3527cfed7-e867c5ed69e87451-afa4\",\"type\":\"action\",\"label\":\"Get selectedPatient from createPatientResponse\",\"designer\":{\"xLocation\":454,\"yLocation\":660,\"next\":\"f76048d44afb-38f651e3ff0faf40-b436\"},\"onInit\":\"scenario.selectedPatient = scenario.createPatientResponse;\"},{\"id\":\"f76048d44afb-38f651e3ff0faf40-b436\",\"type\":\"branch\",\"condition\":\"scenario.selectedPatient != null && scenario.selectedPatient.id\",\"designer\":{\"xLocation\":594,\"yLocation\":720,\"next\":\"078514832929-825a7f2a7f48ffb8-85e7\"},\"label\":\"verify selectedPatient and id exist\",\"targetStepId\":\"6d8d5624fc68-14dbc6ab4e4f5480-66ba\"},{\"id\":\"6d8d5624fc68-14dbc6ab4e4f5480-66ba\",\"type\":\"datasource\",\"designer\":{\"xLocation\":714,\"yLocation\":740,\"errorStepId\":\"f3f8ce7915df-b577dc5f64070dd6-b24c\"},\"dataConnection\":\"%Tenant's FHIR server data connection%\",\"urlPath\":\"'/Appointment'\",\"urlParams\":\"'_format=application/json'\",\"method\":\"post\",\"headers\":\"\",\"payload\":\"{\\n    \\\"resourceType\\\": \\\"Appointment\\\",\\n    \\\"status\\\": \\\"booked\\\",\\n    \\\"serviceType\\\": [{\\n\\t\\t\\\"coding\\\": [{\\n\\t\\t\\t\\\"code\\\": scenario.selectedServiceTypeCode\\n\\t\\t}]\\n\\t}],\\n\\t\\\"start\\\": scenario.selectedSlot.start,\\n\\t\\\"end\\\": scenario.selectedSlot.end,\\n\\t\\\"slot\\\": {\\n\\t\\t\\\"reference\\\": \\\"Slot/\\\" + scenario.selectedSlot.id,\\n\\t\\t\\\"type\\\": \\\"Slot\\\",\\n\\t\\t\\\"display\\\": \\\"Slot for appointment\\\"\\n\\t},\\n\\t\\\"comment\\\": scenario.appointmentComments,\\n\\t\\\"participant\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"actor\\\": {\\n\\t\\t\\t\\t\\\"reference\\\": scenario.selectedSchedule.actor[0].reference,\\n\\t\\t\\t\\t\\\"type\\\": \\\"HealthcareService\\\",\\n\\t\\t\\t\\t\\\"display\\\": \\\"HealthcareService of the appointment\\\"\\n\\t\\t\\t},\\n\\t\\t\\t\\\"required\\\": \\\"required\\\",\\n\\t\\t\\t\\\"status\\\": \\\"accepted\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"actor\\\": {\\n\\t\\t\\t\\t\\\"reference\\\": \\\"Patient/\\\" + scenario.selectedPatient.id,\\n\\t\\t\\t\\t\\\"type\\\": \\\"Patient\\\",\\n\\t\\t\\t\\t\\\"display\\\": \\\"Patient of the appointment\\\"\\n\\t\\t\\t},\\n\\t\\t\\t\\\"required\\\": \\\"required\\\",\\n\\t\\t\\t\\\"status\\\": \\\"accepted\\\"\\n\\t\\t}\\n\\t]\\n}\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"createAppointmentResponse\",\"label\":\"Create Appointment for selectedPatient and HealthcareService\",\"authenticationProvider\":\"%Tenant's FHIR server auth-provider%\",\"fhirAction\":\"Create\",\"fhirResource\":\"Appointment\"},{\"id\":\"0b62df6d1715-fb66f7d01f91b68d-129d\",\"type\":\"statement\",\"designer\":{\"xLocation\":136,\"yLocation\":1430,\"next\":\"de992ea4b8ab-8eca4164be591f19-14c2\"},\"text\":\"\\\"Thank you, \\\" + scenario.createPatientInfo.firstName +\\r\\n\\\". I've scheduled an appointment for \\\" + scenario.selectedSlotStartText.entity + \\r\\n\\r\\n\\\". \\\\n We look forward to seeing you then.\\\"\",\"stringId\":\"stringId_710a1cd7b9ae8851\",\"label\":\"Summary\"},{\"id\":\"5dc09ed97398-ffed6e2f5572de0a-29bd\",\"type\":\"action\",\"label\":\"Selected slot\",\"designer\":{\"xLocation\":142,\"yLocation\":1126,\"next\":\"082bd2f96d15-9cef06455edd8425-f7ea\"},\"onInit\":\"scenario.selectedSlot = scenario.availableSlots[scenario.selectedSlotStartText.entity].slot\"},{\"id\":\"98bf84566402-e951c9d55729919f-fd24\",\"type\":\"branch\",\"condition\":\"scenario.selectedSchedule != null && scenario.selectedSchedule.id\",\"designer\":{\"xLocation\":148,\"yLocation\":707,\"next\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\"},\"label\":\"Verification\",\"targetStepId\":\"98f942e5014a-f5622096aa0f267b-d372\"},{\"id\":\"ac43e93ecc06-027530b882db2982-c6be\",\"type\":\"branch\",\"condition\":\"Object.keys(scenario.availableSlots).length > 0\",\"designer\":{\"xLocation\":148,\"yLocation\":980,\"next\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\"},\"label\":\"Verification\",\"targetStepId\":\"ea07d46be4a3-795e5641bde518d2-2058\"},{\"id\":\"9ec4f8beae25-c4b4a989620942c7-e56a\",\"type\":\"branch\",\"condition\":\"scenario.userConsent.entity === 'Yes'\",\"designer\":{\"xLocation\":148,\"yLocation\":120,\"next\":\"7ac438cb489c-4e926184a815dc4c-bf64\"},\"label\":\"Consent\",\"targetStepId\":\"20737162a687-2f88f90ae4ff837e-e760\"},{\"id\":\"0eea354a555b-c4421351c96263ab-faa5\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":136,\"yLocation\":1365,\"next\":\"0b62df6d1715-fb66f7d01f91b68d-129d\"},\"variable\":\"createPatientInfo\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n  \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n  \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n  \\\"version\\\": \\\"1.0\\\",\\r\\n  \\\"body\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"TextBlock\\\",\\r\\n      \\\"text\\\": \\\"Name:\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Text\\\",\\r\\n      \\\"placeholder\\\": \\\"First name\\\",\\r\\n      \\\"style\\\": \\\"text\\\",\\r\\n      \\\"maxLength\\\": 0,\\r\\n      \\\"id\\\": \\\"firstName\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Text\\\",\\r\\n      \\\"placeholder\\\": \\\"Last Name\\\",\\r\\n      \\\"style\\\": \\\"text\\\",\\r\\n      \\\"maxLength\\\": 0,\\r\\n      \\\"id\\\": \\\"lastName\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Gender:\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.ChoiceSet\\\",\\r\\n      \\\"isMultiSelect\\\": false,\\r\\n      \\\"id\\\": \\\"gender\\\",\\r\\n      \\\"style\\\": \\\"expanded\\\",\\r\\n      \\\"value\\\": \\\"female\\\",\\r\\n      \\\"choices\\\": [\\r\\n        {\\r\\n          \\\"title\\\": \\\"Female\\\",\\r\\n          \\\"value\\\": \\\"female\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"title\\\": \\\"Male\\\",\\r\\n          \\\"value\\\": \\\"male\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"title\\\": \\\"Other\\\",\\r\\n          \\\"value\\\": \\\"other\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"TextBlock\\\",\\r\\n      \\\"text\\\": \\\"Date of birth:\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Date\\\",\\r\\n      \\\"placeholder\\\": \\\"Date of birth\\\",\\r\\n      \\\"id\\\": \\\"birthDate\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Mobile phone number:\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"Input.Text\\\",\\r\\n        \\\"id\\\": \\\"mobilePhone\\\",\\r\\n        \\\"style\\\": \\\"tel\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Home phone number:\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"Input.Text\\\",\\r\\n        \\\"id\\\": \\\"homePhone\\\",\\r\\n        \\\"style\\\": \\\"tel\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Email address:\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"Input.Text\\\",\\r\\n        \\\"id\\\": \\\"email\\\",\\r\\n        \\\"style\\\": \\\"email\\\"\\r\\n    }\\r\\n    ],\\r\\n  \\\"actions\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"Action.Submit\\\",\\r\\n      \\\"title\\\": \\\"Schedule appointment\\\"\\r\\n    }\\r\\n  ]\\r\\n}\"}],\"stringId\":\"stringId_ebf12d1f053c2ba9\",\"label\":\"Registration\"},{\"id\":\"bd1956fd4413-ea58382b854b01ad-418f\",\"type\":\"statement\",\"designer\":{\"xLocation\":136,\"yLocation\":1290,\"next\":\"0eea354a555b-c4421351c96263ab-faa5\"},\"text\":\"Thank you. Let me take your information before scheduling the appointment.\",\"stringId\":\"stringId_645f17048c018277\",\"label\":\"Thanks\"},{\"id\":\"082bd2f96d15-9cef06455edd8425-f7ea\",\"type\":\"statement\",\"designer\":{\"xLocation\":136,\"yLocation\":1220,\"next\":\"bd1956fd4413-ea58382b854b01ad-418f\"},\"text\":\"Developer notice:\",\"stringId\":\"stringId_ac972b5d0738e76d\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n    \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n    \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n    \\\"version\\\": \\\"1.0\\\",\\r\\n    \\\"body\\\": [\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"The following registration form is used for demo purposes only and does not submit personal information to the FHIR server.\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"Once a private FHIR server is implemented, connect the registration form to the disabled data connection steps to implement patient handling and appointment scheduling.\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        }\\r\\n    ]\\r\\n}\"}],\"label\":\"Notice\"},{\"id\":\"078514832929-825a7f2a7f48ffb8-85e7\",\"type\":\"statement\",\"designer\":{\"xLocation\":454,\"yLocation\":740},\"text\":\"I was not able to find open slots, please try again later.\",\"stringId\":\"stringId_761a6f4fd3c3d1f5\"},{\"id\":\"b3be28eabcc7-34f1318cb23b7620-f297\",\"type\":\"yesnoprompt\",\"dataType\":\"boolean\",\"designer\":{\"xLocation\":594,\"yLocation\":487,\"next\":\"5e412d32925f-1b151af36563e473-4994\"},\"text\":\"Thank you. Let me take your information before scheduling the appointment. \\r\\n\\r\\nAre you already registered with Contoso Hospitals?  \",\"variable\":\"alreadyRegistered\",\"stringId\":\"stringId_5bd89f1debc27fa3\",\"targetStepId\":\"c55b79332fe7-c93aa03848cefd79-35a1\"},{\"id\":\"425221c20c01-813aa9d9dde19cb3-b193\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":588,\"yLocation\":400,\"next\":\"b3be28eabcc7-34f1318cb23b7620-f297\"},\"text\":\"Developer notice:\",\"variable\":\"Consent\",\"stringId\":\"stringId_0cc175b9c0f1b6a8\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n    \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n    \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n    \\\"version\\\": \\\"1.0\\\",\\r\\n    \\\"body\\\": [\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"This conversation flow searches for an existing patient record on the FHIR server or creates a new one and schedules the appointment.\\\\n\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"To use this flow, replace the information on the data connection and authentication provider objects with your real FHIR server information. Then, connect this step with the main conversation flow.\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        }\\r\\n    ],\\r\\n    \\\"actions\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"Action.Submit\\\",\\r\\n      \\\"title\\\": \\\"Continue\\\"\\r\\n    }\\r\\n  ]\\r\\n    \\r\\n}\"}],\"label\":\"Notice\"},{\"id\":\"5e412d32925f-1b151af36563e473-4994\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":454,\"yLocation\":540,\"next\":\"a33a29b90878-d2ba8903a3e41439-4a83\"},\"variable\":\"createPatientInfo\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n  \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n  \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n  \\\"version\\\": \\\"1.0\\\",\\r\\n  \\\"body\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"TextBlock\\\",\\r\\n      \\\"text\\\": \\\"Please specify your name\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Text\\\",\\r\\n      \\\"placeholder\\\": \\\"Name\\\",\\r\\n      \\\"style\\\": \\\"text\\\",\\r\\n      \\\"maxLength\\\": 0,\\r\\n      \\\"id\\\": \\\"firstName\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Text\\\",\\r\\n      \\\"placeholder\\\": \\\"Last Name\\\",\\r\\n      \\\"style\\\": \\\"text\\\",\\r\\n      \\\"maxLength\\\": 0,\\r\\n      \\\"id\\\": \\\"lastName\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Please select your gender\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.ChoiceSet\\\",\\r\\n      \\\"isMultiSelect\\\": false,\\r\\n      \\\"id\\\": \\\"gender\\\",\\r\\n      \\\"style\\\": \\\"expanded\\\",\\r\\n      \\\"value\\\": \\\"female\\\",\\r\\n      \\\"choices\\\": [\\r\\n        {\\r\\n          \\\"title\\\": \\\"female\\\",\\r\\n          \\\"value\\\": \\\"female\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"title\\\": \\\"male\\\",\\r\\n          \\\"value\\\": \\\"male\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"title\\\": \\\"other\\\",\\r\\n          \\\"value\\\": \\\"other\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"TextBlock\\\",\\r\\n      \\\"text\\\": \\\"Select date of birth\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Date\\\",\\r\\n      \\\"placeholder\\\": \\\"Date of birth\\\",\\r\\n      \\\"id\\\": \\\"birthDate\\\",\\r\\n      \\\"value\\\": \\\"1970-01-01\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Mobile phone number\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"Input.Text\\\",\\r\\n        \\\"id\\\": \\\"mobilePhone\\\",\\r\\n        \\\"placeholder\\\": \\\"xxx.xxx.xxxx\\\",\\r\\n        \\\"style\\\": \\\"tel\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Home phone number\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"Input.Text\\\",\\r\\n        \\\"id\\\": \\\"homePhone\\\",\\r\\n        \\\"placeholder\\\": \\\"xxx.xxx.xxxx\\\",\\r\\n        \\\"style\\\": \\\"tel\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Your email\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"Input.Text\\\",\\r\\n        \\\"id\\\": \\\"email\\\",\\r\\n        \\\"placeholder\\\": \\\"youremail@example.com\\\",\\r\\n        \\\"style\\\": \\\"email\\\"\\r\\n    }\\r\\n    ],\\r\\n  \\\"actions\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"Action.Submit\\\",\\r\\n      \\\"title\\\": \\\"Submit\\\"\\r\\n    }\\r\\n  ]\\r\\n}\"}],\"label\":\"Registration form\"},{\"id\":\"c55b79332fe7-c93aa03848cefd79-35a1\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":708,\"yLocation\":540,\"next\":\"a2da92d8f49f-1721deedc2a067c0-c43d\"},\"variable\":\"searchPatientInfo\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n  \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n  \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n  \\\"version\\\": \\\"1.0\\\",\\r\\n  \\\"body\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"TextBlock\\\",\\r\\n      \\\"text\\\": \\\"Please specify your name\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Text\\\",\\r\\n      \\\"placeholder\\\": \\\"Name\\\",\\r\\n      \\\"style\\\": \\\"text\\\",\\r\\n      \\\"maxLength\\\": 0,\\r\\n      \\\"id\\\": \\\"firstName\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Text\\\",\\r\\n      \\\"placeholder\\\": \\\"Last Name\\\",\\r\\n      \\\"style\\\": \\\"text\\\",\\r\\n      \\\"maxLength\\\": 0,\\r\\n      \\\"id\\\": \\\"lastName\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Select your gender\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.ChoiceSet\\\",\\r\\n      \\\"isMultiSelect\\\": false,\\r\\n      \\\"id\\\": \\\"gender\\\",\\r\\n      \\\"style\\\": \\\"expanded\\\",\\r\\n      \\\"value\\\": \\\"gender\\\",\\r\\n      \\\"choices\\\": [\\r\\n        {\\r\\n          \\\"title\\\": \\\"female\\\",\\r\\n          \\\"value\\\": \\\"female\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"title\\\": \\\"male\\\",\\r\\n          \\\"value\\\": \\\"male\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"title\\\": \\\"other\\\",\\r\\n          \\\"value\\\": \\\"other\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"TextBlock\\\",\\r\\n      \\\"text\\\": \\\"Select date of birth\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Date\\\",\\r\\n      \\\"placeholder\\\": \\\"Date of birth\\\",\\r\\n      \\\"id\\\": \\\"birthDate\\\",\\r\\n      \\\"value\\\": \\\"1970-01-01\\\"\\r\\n    }],\\r\\n  \\\"actions\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"Action.Submit\\\",\\r\\n      \\\"title\\\": \\\"Submit\\\"\\r\\n    }\\r\\n  ]\\r\\n}\"}],\"label\":\"Existing patient details\"},{\"id\":\"f3f8ce7915df-b577dc5f64070dd6-b24c\",\"type\":\"statement\",\"designer\":{\"xLocation\":588,\"yLocation\":633},\"text\":\"**Developer notice:**\\r\\nReplace the information on the data connection and authentication provider objects with your real FHIR server informaton before using this conversation flow.\",\"stringId\":\"stringId_bffa905c76f79b01\",\"label\":\"Notice\"},{\"id\":\"de992ea4b8ab-8eca4164be591f19-14c2\",\"type\":\"prompt\",\"dataType\":\"[systemLocalizedStrings[\\\"/builtin/feedback.triage_prompt_yes\\\"], systemLocalizedStrings[\\\"/builtin/feedback.triage_prompt_no\\\"]]\",\"designer\":{\"xLocation\":358,\"yLocation\":1287,\"next\":\"53dd66a4a80c-f0adc4ad998d3372-98df\",\"listStyle\":3},\"text\":\"systemLocalizedStrings[\\\"/builtin/feedback.triage_prompt_question\\\"]\",\"variable\":\"show_feedback\",\"submitTitle\":\"Submit\",\"label\":\"Show feedback\",\"stringId\":\"stringId_1fd8f056fd6c7478\",\"choiceType\":\"choice\"},{\"id\":\"53dd66a4a80c-f0adc4ad998d3372-98df\",\"type\":\"branch\",\"condition\":\"// Evaluate whether the user agreed to provide feedback\\r\\n\\r\\nscenario.show_feedback.index == 0\",\"designer\":{\"xLocation\":368,\"yLocation\":1348},\"targetStepId\":\"a6f03f78ad57-f93d255a602a4477-458b\"},{\"id\":\"a6f03f78ad57-f93d255a602a4477-458b\",\"type\":\"beginScenario\",\"designer\":{\"xLocation\":368,\"yLocation\":1430},\"scenario\":\"/builtin/feedback\"}],\"breaking\":true,\"interrupting\":true,\"returningMessage\":\"\"}"
}