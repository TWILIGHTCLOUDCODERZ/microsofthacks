{
 "name": " Asthma symptom checker",
 "id": "5724f26b-6bde-42ac-8412-58cc04aec1e8",
 "scenario_trigger": "PediatricAsthmaSymptomScale",
 "description": "Measure asthma control in children using Pediatric Asthma Symptom Scale",
 "active": true,
 "updated": "2022-12-07T13:02:53.102Z",
 "userDisplayName": "ODL_User 777981",
 "code": "{\"version\":3,\"steps\":[{\"id\":\"2b19f9a7f47c-858c1a307812887e-f05d\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":-140,\"yLocation\":-78,\"next\":\"45d0a6055c06-d1a6b92cf8f730c9-f38e\"},\"variable\":\"Consent\",\"label\":\"Notice\",\"layout\":\"carousel\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n    \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n    \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n    \\\"version\\\": \\\"1.0\\\",\\r\\n    \\\"body\\\": [\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"size\\\": \\\"Medium\\\",\\r\\n            \\\"weight\\\": \\\"Bolder\\\",\\r\\n            \\\"text\\\": \\\"Pediatric Asthma Symptom Scale\\\"\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"This scenario leverages the Healthcare Bot Service to assist parents with self-administration of the 8-item Pediatric Asthma Symptom Scale to measure asthma control in children. The scenario calculates scores and assembles a FHIR-compliant response. All strings are localized and ready for translation.\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"Additional information on the scale and the scoring details can be found here: https://www.rand.org/health-care/surveys_tools/ped_asthma.html\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        }\\r\\n    ],\\r\\n    \\\"actions\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"Action.Submit\\\",\\r\\n      \\\"title\\\": \\\"Continue\\\"\\r\\n    }\\r\\n  ]\\r\\n    \\r\\n}\"}],\"text\":\"Hi,\\nTwilight Healthcare agent here to help you!\",\"stringId\":\"PediatricAsthmaSymptomScale_7b99c0a0abc93517\",\"markdown\":false},{\"id\":\"996435463f4d-50a69ea584317c12-0f70\",\"type\":\"prompt\",\"dataType\":\"customLocalizedStrings[\\\"pass/answers1\\\"]\",\"designer\":{\"xLocation\":122,\"yLocation\":102,\"next\":\"734e9e990cff-322181015693b217-7425\",\"listStyle\":3},\"text\":\"scenario.question\",\"variable\":\"answer\",\"submitTitle\":\"Submit\",\"label\":\"q1-5\",\"stringId\":\"stringId_d40f2553eb3d9317\",\"choiceType\":\"choice\"},{\"id\":\"45d0a6055c06-d1a6b92cf8f730c9-f38e\",\"type\":\"action\",\"label\":\"Setup\",\"designer\":{\"xLocation\":-73,\"yLocation\":-25,\"next\":\"5dcefd182fe3-b26b9e9c0097e211-f49c\"},\"onInit\":\"scenario.green_array = []\\nscenario.yellow_array = []\\nscenario.red_array = []\\nscenario.green_array_answers = []\\nscenario.yellow_array_answers = []\\nscenario.red_array_answers = []\\nscenario.results_array = []\\nscenario.score_list = [1, 2, 2, 3, 3];\\nscenario.score = 0;\\n                    \\nscenario.question_index = 0;\\nscenario.question = customLocalizedStrings[\\\"pass/questions/q1\\\"].replace(/{.*}/, customLocalizedStrings[\\\"pass/questions/q1/symptoms\\\"][scenario.question_index]);\\n\\nscenario.summary_colors = customLocalizedStrings[\\\"pass/summary2\\\"]\\n\\n//Questionare question index, our first question number is 1\\nscenario.questionare_question_index = 1;\\n\\n// FHIR Response setup\\n// The format is according to the standard: https://www.hl7.org/fhir/questionnaireresponse.html\\n\\nvar curr_time = new Date().toISOString();\\n\\nscenario.fhir_response = {\\n  \\\"resourceType\\\": \\\"QuestionnaireResponse\\\",\\n  \\\"status\\\": \\\"in-progress\\\",\\n  \\\"text\\\": {\\n    \\\"status\\\": \\\"generated\\\",\\n    \\\"div\\\": \\\"<div xmlns=\\\\\\\"http://www.w3.org/1999/xhtml\\\\\\\">PASS - Pediatric Asthma Symptom Scale</div>\\\"\\n  },\\n  \\\"authored\\\": curr_time,\\n  \\\"item\\\": [\\n  ]\\n}\\n\"},{\"id\":\"c67b4272e57a-b5e00391881db038-e503\",\"type\":\"branch\",\"condition\":\"scenario.question_index == 5\",\"designer\":{\"xLocation\":-36,\"yLocation\":104,\"next\":\"996435463f4d-50a69ea584317c12-0f70\"},\"targetStepId\":\"47b1bf24f1ae-0c8adc7d050ff542-7144\"},{\"id\":\"47b1bf24f1ae-0c8adc7d050ff542-7144\",\"type\":\"action\",\"label\":\"Setup\",\"designer\":{\"xLocation\":-28,\"yLocation\":148,\"next\":\"647800f44a1e-72fe1c858d43162d-b1ce\"},\"onInit\":\"scenario.question_index_new = 2;\\nscenario.question = customLocalizedStrings[\\\"pass/questions/q\\\" + scenario.question_index_new.toString()];\\nscenario.answers = customLocalizedStrings[\\\"pass/answers\\\" + scenario.question_index_new.toString()];\\n\\n\\n\\n\"},{\"id\":\"647800f44a1e-72fe1c858d43162d-b1ce\",\"type\":\"prompt\",\"dataType\":\"scenario.answers\",\"designer\":{\"xLocation\":109,\"yLocation\":207,\"next\":\"b90f4c1809a5-8483bd67914fce91-6ddd\",\"listStyle\":3},\"text\":\"scenario.question\",\"variable\":\"answer\",\"submitTitle\":\"Submit\",\"label\":\"q6-8\",\"stringId\":\"stringId_d40f2553eb3d9317\",\"choiceType\":\"choice\"},{\"id\":\"b90f4c1809a5-8483bd67914fce91-6ddd\",\"type\":\"action\",\"label\":\"Action\",\"designer\":{\"xLocation\":243,\"yLocation\":239,\"next\":\"8c6d5779965b-fdcbb3adad46f65d-21ec\"},\"onInit\":\"scenario.answer[\\\"scores_list\\\"] = scenario.score_list;\\nscenario.answer.score = scenario.answer.scores_list[scenario.answer.index];\\nscenario.score += scenario.answer.index + 1;\\n\\nif (scenario.answer.score == 1) {\\n    scenario.green_array.push({type: \\\"TextBlock\\\", text: customLocalizedStrings[\\\"pass/symptoms_list\\\"][scenario.question_index]})\\n    scenario.green_array_answers.push({type: \\\"TextBlock\\\", text: scenario.answer.value});\\n} else if (scenario.answer.score == 2) {\\n    scenario.yellow_array.push({type: \\\"TextBlock\\\", text: customLocalizedStrings[\\\"pass/symptoms_list\\\"][scenario.question_index]})\\n    scenario.yellow_array_answers.push({type: \\\"TextBlock\\\", text: scenario.answer.value});\\n} else if (scenario.answer.score == 3) {\\n    scenario.red_array.push({type: \\\"TextBlock\\\", text: customLocalizedStrings[\\\"pass/symptoms_list\\\"][scenario.question_index]})\\n    scenario.red_array_answers.push({type: \\\"TextBlock\\\", text: scenario.answer.value});\\n}\\n\\n// Add to FHIR response\\nvar fhir_item_response = {\\n    \\\"linkId\\\" : scenario.questionare_question_index.toString(),\\n    \\\"text\\\": scenario.question,\\n    \\\"answer\\\": [{\\\"valueString\\\": scenario.answer.value}]}\\n\\nscenario.fhir_response.item.push(fhir_item_response)\\n\\n// Increment questionnaire question index\\nscenario.questionare_question_index ++;\\n\\n// Increment question index\\nscenario.question_index ++;\\nscenario.question_index_new ++;\\n\\nscenario.question = customLocalizedStrings[\\\"pass/questions/q\\\" + scenario.question_index_new.toString()];\\nscenario.answers = customLocalizedStrings[\\\"pass/answers\\\" + scenario.question_index_new.toString()];\"},{\"id\":\"8c6d5779965b-fdcbb3adad46f65d-21ec\",\"type\":\"branch\",\"condition\":\"scenario.question_index == 8\",\"designer\":{\"xLocation\":225,\"yLocation\":299,\"next\":\"647800f44a1e-72fe1c858d43162d-b1ce\"},\"targetStepId\":\"28b5fc2b7c34-6a1be585db11f23f-6085\"},{\"id\":\"4823fbf624e9-aae14d716d2a43e2-a9f2\",\"type\":\"action\",\"label\":\"Edit results\",\"designer\":{\"xLocation\":380,\"yLocation\":374,\"next\":\"0c1156af7482-818377c63aa70dae-081b\"},\"onInit\":\"scenario.results_array.push(\\n    {\\n        \\\"type\\\": \\\"TextBlock\\\",\\n        \\\"size\\\": \\\"Medium\\\",\\n        \\\"weight\\\": \\\"Bolder\\\",\\n        \\\"text\\\": customLocalizedStrings[\\\"pass/summary\\\"]\\n    }\\n);\\n\\nif (scenario.red_array.length > 0)\\n{\\n    var obj =\\n    {\\n        \\\"type\\\": \\\"ColumnSet\\\",\\n        \\\"columns\\\": [\\n            {\\n                \\\"type\\\": \\\"Column\\\",\\n                \\\"width\\\": \\\"auto\\\",\\n                \\\"style\\\": \\\"attention\\\",\\n                \\\"items\\\": scenario.red_array\\n            },\\n            {\\n                \\\"type\\\": \\\"Column\\\",\\n                \\\"width\\\": \\\"auto\\\",\\n                \\\"style\\\": \\\"attention\\\",\\n                \\\"items\\\": scenario.red_array_answers\\n            }\\n        ]\\n    } \\n    \\n    scenario.results_array.push(\\n        {\\n            \\\"type\\\": \\\"TextBlock\\\",\\n            \\\"text\\\": customLocalizedStrings[\\\"pass/summary2\\\"][0],\\n            \\\"size\\\": \\\"medium\\\",\\n            \\\"color\\\": \\\"attention\\\"\\n        },\\n        obj        \\n    )\\n}\\n\\nif (scenario.yellow_array.length > 0)\\n{\\n    var obj =\\n    {\\n        \\\"type\\\": \\\"ColumnSet\\\",\\n        \\\"columns\\\": [\\n            {\\n                \\\"type\\\": \\\"Column\\\",\\n                \\\"width\\\": \\\"auto\\\",\\n                \\\"style\\\": \\\"warning\\\",\\n                \\\"items\\\": scenario.yellow_array\\n            },\\n            {\\n                \\\"type\\\": \\\"Column\\\",\\n                \\\"width\\\": \\\"auto\\\",\\n                \\\"style\\\": \\\"warning\\\",\\n                \\\"items\\\": scenario.yellow_array_answers\\n            }\\n        ]\\n    } \\n    \\n    scenario.results_array.push(\\n        {\\n            \\\"type\\\": \\\"TextBlock\\\",\\n            \\\"text\\\": customLocalizedStrings[\\\"pass/summary2\\\"][1],\\n            \\\"size\\\": \\\"medium\\\",\\n            \\\"color\\\": \\\"warning\\\"\\n        },\\n        obj        \\n    )\\n}\\n\\nif (scenario.green_array.length > 0)\\n{\\n    var obj =\\n    {\\n        \\\"type\\\": \\\"ColumnSet\\\",\\n        \\\"columns\\\": [\\n            {\\n                \\\"type\\\": \\\"Column\\\",\\n                \\\"width\\\": \\\"auto\\\",\\n                \\\"style\\\": \\\"good\\\",\\n                \\\"items\\\": scenario.green_array\\n            },\\n            {\\n                \\\"type\\\": \\\"Column\\\",\\n                \\\"width\\\": \\\"auto\\\",\\n                \\\"style\\\": \\\"good\\\",\\n                \\\"items\\\": scenario.green_array_answers\\n            }\\n        ]\\n    } \\n    \\n    scenario.results_array.push(\\n        {\\n            \\\"type\\\": \\\"TextBlock\\\",\\n            \\\"text\\\": customLocalizedStrings[\\\"pass/summary2\\\"][2],\\n            \\\"size\\\": \\\"medium\\\",\\n            \\\"color\\\": \\\"good\\\"\\n        },\\n        obj        \\n    )\\n}\"},{\"id\":\"734e9e990cff-322181015693b217-7425\",\"type\":\"action\",\"label\":\"Action\",\"designer\":{\"xLocation\":184,\"yLocation\":152,\"next\":\"c67b4272e57a-b5e00391881db038-e503\"},\"onInit\":\"scenario.answer[\\\"scores_list\\\" ] = scenario.score_list;\\nscenario.answer.score = scenario.answer.scores_list[scenario.answer.index];\\nscenario.score += scenario.answer.index + 1;\\n\\nif (scenario.answer.score == 1) {\\n    scenario.green_array.push({type: \\\"TextBlock\\\", text: customLocalizedStrings[\\\"pass/symptoms_list\\\"][scenario.question_index]});\\n    scenario.green_array_answers.push({type: \\\"TextBlock\\\", text: scenario.answer.value});\\n} else if (scenario.answer.score == 2) {\\n    scenario.yellow_array.push({type: \\\"TextBlock\\\", text: customLocalizedStrings[\\\"pass/symptoms_list\\\"][scenario.question_index]})\\n    scenario.yellow_array_answers.push({type: \\\"TextBlock\\\", text: scenario.answer.value});\\n} else if (scenario.answer.score == 3) {\\n    scenario.red_array.push({type: \\\"TextBlock\\\", text: customLocalizedStrings[\\\"pass/symptoms_list\\\"][scenario.question_index]})\\n    scenario.red_array_answers.push({type: \\\"TextBlock\\\", text: scenario.answer.value});\\n}\\n\\n// Add to FHIR response\\nvar fhir_item_response = {\\n    \\\"linkId\\\" : scenario.questionare_question_index.toString(),\\n    \\\"text\\\": scenario.question,\\n    \\\"answer\\\": [{\\\"valueString\\\": scenario.answer.value}]}\\n\\nscenario.fhir_response.item.push(fhir_item_response)\\n\\n// Increment questionnaire question index\\nscenario.questionare_question_index ++;\\n\\n// Increment question index\\nscenario.question_index ++;\\n\\nscenario.question = customLocalizedStrings[\\\"pass/questions/q1\\\"].replace(/{.*}/, customLocalizedStrings[\\\"pass/questions/q1/symptoms\\\"][scenario.question_index]);\"},{\"id\":\"5dcefd182fe3-b26b9e9c0097e211-f49c\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":3,\"yLocation\":37,\"next\":\"996435463f4d-50a69ea584317c12-0f70\"},\"variable\":\"Consent\",\"submitTitle\":\"Submit\",\"label\":\"intro\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n    \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n    \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n    \\\"version\\\": \\\"1.0\\\",\\r\\n    \\\"body\\\": [\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"size\\\": \\\"Medium\\\",\\r\\n            \\\"weight\\\": \\\"Bolder\\\",\\r\\n            \\\"text\\\": customLocalizedStrings[\\\"pass/headline\\\"]\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": customLocalizedStrings[\\\"pass/introduction\\\"],\\r\\n            \\\"wrap\\\": true\\r\\n        },\\r\\n    ],\\r\\n    \\\"actions\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"Action.Submit\\\",\\r\\n      \\\"title\\\": customLocalizedStrings[\\\"pass/continue\\\"]\\r\\n    }\\r\\n  ]\\r\\n}\"}],\"stringId\":\"stringId_1f8f0aacdc376036\"},{\"id\":\"88d934c22e68-51f52ae1eee1d8c2-7af8\",\"type\":\"statement\",\"designer\":{\"xLocation\":505,\"yLocation\":505,\"next\":\"16c66b1b-5562-473d-8039-637a3fa6f5ce\"},\"stringId\":\"stringId_4a282a3727487d5b\",\"label\":\"score result\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n    \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n    \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n    \\\"version\\\": \\\"1.0\\\",\\r\\n    \\\"body\\\": [\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"size\\\": \\\"Medium\\\",\\r\\n            \\\"weight\\\": \\\"Bolder\\\",\\r\\n            \\\"text\\\": customLocalizedStrings[\\\"pass/score_summary\\\"][0] + \\\" \\\" + scenario.score\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": customLocalizedStrings[\\\"pass/score_summary\\\"][1],\\r\\n            \\\"wrap\\\": true\\r\\n        },\\r\\n    ]\\r\\n}\"}]},{\"id\":\"28b5fc2b7c34-6a1be585db11f23f-6085\",\"type\":\"statement\",\"designer\":{\"xLocation\":385,\"yLocation\":313,\"next\":\"4823fbf624e9-aae14d716d2a43e2-a9f2\"},\"text\":\"customLocalizedStrings[\\\"pass/thank_you\\\"]\",\"stringId\":\"stringId_4a282a3727487d5b\",\"label\":\"thank you\"},{\"id\":\"0c1156af7482-818377c63aa70dae-081b\",\"type\":\"statement\",\"designer\":{\"xLocation\":433,\"yLocation\":425,\"next\":\"88d934c22e68-51f52ae1eee1d8c2-7af8\"},\"stringId\":\"stringId_4a282a3727487d5b\",\"label\":\"answers summary\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n  \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n  \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n  \\\"version\\\": \\\"1.0\\\",\\r\\n  \\\"body\\\": ${results_array}\\r\\n}\"}]},{\"type\":\"beginScenario\",\"id\":\"1ebaf5a4-c7cd-4368-aafb-ec7b97fb0b43\",\"designer\":{\"xLocation\":796,\"yLocation\":631},\"scenario\":\"appointment_scheduling\"},{\"type\":\"yesnoprompt\",\"dataType\":\"boolean\",\"variable\":\"Consult\",\"text\":\"Consult doctor\",\"markdown\":true,\"id\":\"16c66b1b-5562-473d-8039-637a3fa6f5ce\",\"designer\":{\"xLocation\":636,\"yLocation\":573,\"next\":\"0dea930a-e90b-4ec0-9a0b-02ebbc0d7ec0\"},\"stringId\":\"stringId_82a3e1edbc9f9b1c\",\"targetStepId\":\"1ebaf5a4-c7cd-4368-aafb-ec7b97fb0b43\"},{\"type\":\"beginScenario\",\"id\":\"0dea930a-e90b-4ec0-9a0b-02ebbc0d7ec0\",\"designer\":{\"xLocation\":545,\"yLocation\":621},\"scenario\":\"/builtin/feedback\"}],\"breaking\":true,\"interrupting\":true,\"returningMessage\":\"\"}"
}